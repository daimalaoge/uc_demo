{"version":3,"sources":["select.js"],"names":["layui","define","exports","layer","$","jquery","_","lodash","laytpl","utils","_body","tpl","_selector","console","targetId","_that","Select","_classCallCheck","this","_createClass","key","value","_input","undefined","filter","randomCode","id","hasDrop","style","len","top","join","html","_select","after","drop","width","document","log","find","on","e","stope","focus","opts","forEach","push","children","val","length","opt","show","render","clientHeight","append","select","hide","off","index","text","innerText"],"mappings":";8XAAAA,MAAMC,QAAQ,QAAS,SAAU,SAAU,SAAU,SAAUC,GACjDF,MAAMG,MAAlB,IACEC,EAAIJ,MAAMK,OACVC,EAAIN,MAAMO,OACVC,EAASR,MAAMQ,OACfC,EAAQT,MAAMS,MACdC,GANJN,EAAc,SAaV,wIALF,0BACA,sCACA,UAOE,0BALF,sCAgBA,UARE,0BApBoE,sCAiDpE,UAAc,0BAzBd,sCA0BE,UAGD,UArDmEO,GAAA,mDAAA,oCAuDlE,qCAvBF,qCA2BEC,gCACE,oCACA,gCACA,iDACA,iBACAC,gBALyB,gCAnB7B,kCA0BIA,gBACAL,cACEM,aAD0B,WAG1BC,UAoDRb,EAAQ,SAHO,IAvHuD,WAiDpE,SAAAc,IAAcC,gBAAAC,KAAAF,GAyBRH,KAAAA,UA1E8D,OAAAM,aAAAH,IAAAI,IAAA,SAAAC,MAAA,SA8E5DC,GAEEtB,OADQuB,IAAAC,EACRxB,2BACA,uCAAAwB,EAAA,KAEApB,KAAE,WACH,IAAAW,EALDX,EAAAc,MAMAJ,EAAaV,EAAEqB,aACfP,KAAAQ,GAAMC,EACNT,KAAAU,MAAKD,QAAS,OACZnB,QAAAA,IAAAA,GALcqB,IAMZf,EAAAA,KAAAA,SACAgB,QAAAA,IAAAA,GAF+BtB,EAAAG,EAG9BoB,KAAA,KAACC,QACFC,SAAAA,GACD,SAAAD,GACFjB,EAPDmB,MAOOF,GACLG,IAAAA,EAAA/B,EAAA,sBAAAU,EAAA,KACDsB,EAAAH,EAAAG,QACCC,EAAaJ,EAAS,GAAtBI,aACAjC,QAAEkC,IAAAL,GACF7B,EAAEmC,KA/FHvC,qBA+FawC,GAAA,QAAZ,SAAAC,GACDzC,MAHD0C,MAAAD,GAID,IA1BDnB,EAAAlB,EAAAc,MAAAqB,KAAA,SARFjB,EAAAqB,QAoCArB,EAAAkB,GAAA,uBAAA,SAAAC,GACIG,MAAAA,MAAJH,GACEI,IACKC,EADQC,EAAAA,MACHC,MAAAC,OACR5B,EAAAA,MAAO6B,MADC,EACG7B,KADH,IAAVc,EAAA/B,EAAA,mCAAAU,EAAA,KADFqB,EAAAc,OAAA,EAzGgEd,EAAAgB,OAgH9DtC,EAAQyB,EAARP,KAAA,KAAAqB,QADFtC,SAAAA,EAAAsB,MAAAA,EApDFN,IAAAuB,EAAA,GAwDQf,SAAAA,GACTL,EAAAM,KAjHShC,sBAiHT+C,OAAAtB,KAnBO5B,EAAEiC,UAAUG,GAAG,QAAS,WAsB5Be,EAAS,mCAAfzC,EAAA,KAAA0C,OApBYpD,EAAEc,MAAMuC,IAAI,eAKlB,IAAIb,KACJtC,EAAEuC,QAAQ3B,KAAK6B,SAAU,SAACG,EAAKQ,GAC7Bd,EAAKE,MACHzB,MAAO6B,EAAI7B,MACXsC,KAAMT,EAAIU,cAGdxD,EAAEc,MAAMsB,GAAG,SAAU,WACnB3B,QAAQyB,IAAI,UAGhBzB,QAAQyB,IAAI,YAnHsDtB,EAAA","file":"select.js","sourcesContent":["layui.define(['layer', 'lodash', 'laytpl', 'utils'], function (exports) {\r\n  var layer = layui.layer,\r\n    $ = layui.jquery,\r\n    _ = layui.lodash,\r\n    laytpl = layui.laytpl,\r\n    utils = layui.utils,\r\n    _body = $('body');\r\n\r\n  const SELECT = '.kit-select';\r\n  const RENDER = '.kit-select-render';\r\n  const INPUT = '.kit-select-input';\r\n\r\n  const tpl_drop = [\r\n    '<ul class=\"kit-select-dropdown layui-anim layui-anim-upbit\" style=\"width:{{d.width}}px;top:{{d.top}}px;\" kit-target=\"{{d.targetId}}\">',\r\n    '  <li class=\"kit-item\">',\r\n    '    <a href=\"javascript:;\">#xxx</a>',\r\n    '  </li>',\r\n    '  <li class=\"kit-item\">',\r\n    '    <a href=\"javascript:;\">#xxx</a>',\r\n    '  </li>',\r\n    '  <li class=\"kit-item\">',\r\n    '    <a href=\"javascript:;\">#xxx</a>',\r\n    '  </li>',\r\n    '  <li class=\"kit-item\">',\r\n    '    <a href=\"javascript:;\">#xxx</a>',\r\n    '  </li>',\r\n    '</ul>',\r\n  ];\r\n  const tpl = [\r\n    '<div class=\"kit-select\" kit-id=\"{{d.targetId}}\">',\r\n    '  <div class=\"kit-select-render\">',\r\n    '    <div class=\"kit-select-input\">',\r\n    '      <ul class=\"kit-select-tags\">',\r\n    '        <li class=\"kit-item\">',\r\n    '          <a href=\"javascript:;\">',\r\n    '            <span>#1xx</span>',\r\n    '            <i class=\"layui-icon\">&#x1006;</i>',\r\n    '          </a>',\r\n    '        </li>',\r\n    '        <li class=\"kit-item\">',\r\n    '          <input type=\"text\" />',\r\n    '        </li>',\r\n    '      </ul>',\r\n    '    </div>',\r\n    '  </div>',\r\n    '</div>',\r\n  ];\r\n\r\n  class Select {\r\n    constructor() {\r\n      this.config = {\r\n\r\n      };\r\n    }\r\n    render(filter) {\r\n      const _selector = filter === undefined ?\r\n        $('select.kit-select-target') :\r\n        $('select.kit-select-target[lay-filter=' + filter + ']');\r\n\r\n      _selector.each(function () {\r\n        const _that = $(this);\r\n        const targetId = utils.randomCode();\r\n        this.id = targetId;\r\n        this.style.display = 'none';\r\n        console.log(_that);\r\n        const { multiple } = this;\r\n        console.log(multiple);\r\n        laytpl(tpl.join('')).render({\r\n          targetId\r\n        }, (html) => {\r\n          _that.after(html);\r\n          const _select = $('.kit-select[kit-id=' + targetId + ']')\r\n          const width = _select.width();\r\n          const { clientHeight } = _select[0];\r\n          console.log(_select);\r\n          _select.find(INPUT).on('click', function (e) {\r\n            layui.stope(e);\r\n            const _input = $(this).find('input');\r\n            _input.focus();\r\n            _input.on('input propertychange', function (e) {\r\n              layui.stope(e);\r\n              const _this = $(this);\r\n              const len = _this.val().length;\r\n              $(this).width(len * 8);\r\n            })\r\n            const drop = $('.kit-select-dropdown[kit-target=' + targetId + ']');\r\n            const hasDrop = drop.length > 0;\r\n            if (!hasDrop) {\r\n              laytpl(tpl_drop.join('')).render({\r\n                targetId, width,\r\n                top: clientHeight + 2\r\n              }, (html) => {\r\n                _select.find(RENDER).append(html);\r\n              });\r\n            } else {\r\n              drop.show();\r\n            }\r\n            $(document).on('click', function () {\r\n              $('.kit-select-dropdown[kit-target=' + targetId + ']').hide();\r\n              $(this).off('click');\r\n            });\r\n          });\r\n        });\r\n        // options \r\n        let opts = [];\r\n        _.forEach(this.children, (opt, index) => {\r\n          opts.push({\r\n            value: opt.value,\r\n            text: opt.innerText\r\n          });\r\n        });\r\n        $(this).on('change', function () {\r\n          console.log('cc');\r\n        });\r\n      });\r\n      console.log('cccc');\r\n    };\r\n  }\r\n\r\n  const select = new Select();\r\n\r\n  //输出utils接口\r\n  exports('select', select);\r\n});"]}