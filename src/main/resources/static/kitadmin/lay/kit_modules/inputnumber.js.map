{"version":3,"sources":["inputnumber.js"],"names":["layui","define","exports","$","jquery","laytpl","min","precision","defaultType","onClicked","UP","undefined","InputNumber","that","set","options","this","render","prototype","config","_that","rendered","each","_private","randomCode","join","left","offsetWidth","tpl","html","id","max","type","attr","parent","append","val","parseInt","parseFloat","_in","find","on","c","elem","value","v","isFunction","DOWN","Math","random","toString","substr","validate","_validate","obj","isDouble","isInteger","length","test","inputNumber"],"mappings":";cAAAA,MAAMC,QAAQ,SAAU,UAAW,SAASC,GAC1C,IAAIC,EAAIH,MAAMI,OADhBJ,EAAaA,MAACK,OAEVA,GAGA,iFADF,6EAGE,+EAIF,UAGIC,EAFY,WAGZC,KAAAA,QACAC,IAAAA,IACAC,IAAAA,EALFF,UAAA,EADFC,YAAA,UASIE,eAAKC,IAMPC,EAAOC,UAAPC,IAAA,SAAAC,GAGA,OADFH,EAAAA,QAAAA,EALAI,KAKsBC,OAAtBF,GALAC,MAQEb,EAAEe,UAAAD,OAAA,WACA,IACAE,EADIC,KACAC,OACJlB,EAAA,mCAAemB,KAAA,WACb,IAAAF,EAAAjB,EAAAa,MAEAX,IADSkB,EAASC,KAAAA,iBACPC,CAETC,IAAAA,EAAMN,EAASO,aAFWtB,EAGzBuB,EAAAH,KAASI,KAAMZ,QAChBa,GAAIxB,EACJoB,KAAIK,EAAMX,GAAAA,YAAgBD,IAC1B,SAAIZ,GACJ,IAAIyB,EAAAA,EAAOZ,GAAMa,KAAKd,EAAAb,IAFlByB,EAAMX,EAAM,GAAGW,KAAOZ,EAAOY,IAIjCX,EAAAA,EAAAa,KAAA,qBAAAd,EAAAZ,UACM2B,EAASC,KAAON,gBAAtBV,EAAAX,YADAY,EAAM,GAAGU,GAAKA,EAIdV,EAAIgB,SAAMhB,OAAVS,GACAT,EAAIG,KAAAA,gBAAA,QAEH,IAAAa,EAAAhB,EAAAgB,MAIKhB,OAHN,GAAAG,EAAQJ,SAAOX,IACbY,EAAKgB,IAAA,GAEDhB,EAAAZ,aACD,IAAA,UACG6B,SAASD,GAAOC,SAAS/B,IAC3Bc,EAAMgB,IAAI9B,GAEZ+B,SAAAD,GAAAC,SAAA/B,IACFc,EAAKgB,IAAL9B,GAEIc,MACD,IAAA,SACGkB,WAAWF,GAAOE,WAAWhC,IAC/Bc,EAAMgB,IAAI9B,GAEZgC,WAAAF,GAAAE,WAAAhC,IAhBJc,EAAAgB,IAAA9B,GAsBE,IAAAiC,EAAIpB,EAAAA,mBAAuBW,EAA3B,MACES,EAAAC,KAtDZ5B,uBAsDoByB,IAAAA,SAARI,GAAA,QAAA,WACAC,IAAAA,EAAKL,EAAS9B,SAAda,EAAAgB,OACAL,GAAA,YAAAA,EAAMM,YAAN,CACA,IAAIK,EAAAA,SACFA,IACFtB,GAAAA,SAAAb,MACDwB,EAAAM,SAAAN,MAECY,EAAMvB,GACNwB,EAAAA,IAAOC,GAZXtB,EAAAuB,WAAA3B,EAAAV,YAAAU,EAAAV,WAeI+B,KAAKO,EACPH,MAAQrB,MAGNmB,EAAAA,KArEN7B,yBAqEWwB,IAAS9B,SAAdkC,GAAA,QAAA,WACAnC,IAAAA,EAAM+B,EAAS/B,SAAfc,EAAAgB,OACA,GACE,YADFjB,EAASb,YACP,CACFc,IAAAA,EAAMgB,SAANS,IACDH,GAAAL,SAAA9B,MACDgB,EAAAA,SAASuB,MAEPF,EAAAA,GAFFxB,EAAAgB,IAAAM,GA9DJnB,EAAAuB,WAAA3B,EAAAV,YAAAU,EAAAV,WAoEDkC,KAAAvB,EA1EHwB,MAAAC,YAkFE,IAAAtB,GACEC,WAAA,WACD,OAAAwB,KAAAC,SAAAC,SAAA,IAAAC,OAAA,IAEFC,SATY,SAAAhB,GAUbU,MAAY,KAAZA,GAAYO,EAASC,UAAKlB,IAAAiB,EAAAE,SAAAnB,GAV5BA,EAWW,GAIToB,WAAW,SAAAF,GACT,MAAO,mBAAIG,IAGXJ,GACDG,UAAA,SAAApB,GANH,OAAA,GAAAA,EAAAqB,QAAA,aAAAC,KAAAtB,IASAmB,SAAII,SAAcvB,GAJd,OAAqB,GAAdA,EAAIqB,QAAe,sBAAsBC,KAAKtB,KAMzDlC,EAAQ,cAFU,IAAIU","file":"inputnumber.js","sourcesContent":["layui.define(['jquery', 'laytpl'], function(exports) {\r\n  var $ = layui.jquery,\r\n    laytpl = layui.laytpl;\r\n\r\n  var tpl = [\r\n    '<div class=\"kit-inputnumber\" kit-in-for=\"{{d.id}}\" style=\"left:{{d.left}}px;\">',\r\n    '  <div class=\"kit-inputnumber-up\"><i class=\"layui-icon\">&#xe619;</i></div>',\r\n    '  <div class=\"kit-inputnumber-down\"><i class=\"layui-icon\">&#xe61a;</i></div>',\r\n    '</div>'\r\n  ];\r\n\r\n  var InputNumber = function() {\r\n    this.config = {\r\n      max: 1000000,\r\n      min: 0,\r\n      precision: 1,\r\n      defaultType: 'integer',\r\n      onClicked: undefined\r\n    };\r\n  }\r\n  var UP = '.kit-inputnumber-up',\r\n    DOWN = '.kit-inputnumber-down',\r\n    IN = '.kit-inputnumber';\r\n  InputNumber.prototype.set = function(options) {\r\n    var that = this;\r\n    $.extend(true, that.config, options);\r\n    return that;\r\n  };\r\n  InputNumber.prototype.render = function() {\r\n    var that = this,\r\n      config = that.config;\r\n    $('input[kit-target=\"inputnumber\"]').each(function() {\r\n      var _that = $(this);\r\n      var rendered = _that.attr('data-rendered');\r\n      if (!rendered) {\r\n        // 随机id\r\n        var id = _private.randomCode();\r\n        laytpl(tpl.join('')).render({\r\n          id: id,\r\n          left: _that[0].offsetWidth - 28\r\n        }, function(html) {\r\n          var min = _that[0].min || config.min; // 读取最小值\r\n          var max = _that[0].max || config.max; // 读取最大值\r\n          var precision = _that.attr('kit-in-precision') || config.precision; //向量\r\n          var type = _that.attr('kit-in-type') || config.defaultType;         //类型\r\n\r\n          _that[0].id = id;\r\n          _that.parent().append(html);\r\n          _that.attr('data-rendered', 'true');\r\n\r\n          var val = _that.val();\r\n          if (_private.validate(val) == 0) {\r\n            _that.val(0);\r\n          }\r\n          switch (config.defaultType) {\r\n            case 'integer':\r\n              if (parseInt(val) > parseInt(max)) {\r\n                _that.val(max);\r\n              }\r\n              if (parseInt(val) < parseInt(min)) {\r\n                _that.val(min);\r\n              }\r\n              break;\r\n            case 'double':\r\n              if (parseFloat(val) > parseFloat(max)) {\r\n                _that.val(max);\r\n              }\r\n              if (parseFloat(val) < parseFloat(min)) {\r\n                _that.val(min);\r\n              }\r\n              break;\r\n          }\r\n          // 监听事件\r\n          var _in = $('div[kit-in-for=\"' + id + '\"]');\r\n          _in.find(UP).off('click').on('click', function() {\r\n            var v = _private.validate(_that.val());\r\n            if (config.defaultType === 'integer') {\r\n              var c = parseInt(v);\r\n              c += parseInt(precision);\r\n              max = parseInt(max);\r\n              if (c >= max)\r\n                c = max;\r\n              _that.val(c);\r\n            }\r\n            _private.isFunction(config.onClicked) && config.onClicked({\r\n              elem: _that,\r\n              value: v\r\n            });\r\n          });\r\n          _in.find(DOWN).off('click').on('click', function() {\r\n            var v = _private.validate(_that.val());\r\n            if (config.defaultType === 'integer') {\r\n              var c = parseInt(v);\r\n              c -= parseInt(precision);\r\n              min = parseInt(min);\r\n              if (c <= min)\r\n                c = min;\r\n              _that.val(c);\r\n            }\r\n            _private.isFunction(config.onClicked) && config.onClicked({\r\n              elem: _that,\r\n              value: v\r\n            });\r\n          });\r\n        });\r\n      }\r\n    });\r\n  };\r\n  var _private = {\r\n    randomCode: function() {\r\n      return Math.random().toString(36).substr(2);\r\n    },\r\n    validate: function(val) {\r\n      if (!(val !== '' && _validate.isInteger(val) || _validate.isDouble(val))) {\r\n        return 0;\r\n      }\r\n      return val;\r\n    },\r\n    isFunction: function(obj) {\r\n      return typeof obj === 'function';\r\n    }\r\n  };\r\n  var _validate = {\r\n    isInteger: function(val) {\r\n      return val.length != 0 && /^[-+]?\\d*$/.test(val);\r\n    },\r\n    isDouble: function(val) {\r\n      return val.length != 0 && /^[-\\+]?\\d+(\\.\\d+)?$/.test(val);\r\n    }\r\n  }\r\n\r\n  var inputNumber = new InputNumber();\r\n\r\n  exports('inputnumber', inputNumber);\r\n});"]}