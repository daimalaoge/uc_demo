{"version":3,"sources":["admin.js"],"names":["mods","layui","element","utils","jquery","route","_","tabs","layer","menu","component","kit","elem","loadType","this","version","Admin","config","that","callback","setting","getItem","localStorage","undefined","type","init","_private","routeInit","menuInit","tabsInit","setUrlState","target","_that","attr","shade","url","alert","mockjs","inject","APIs","render","routeOpts","path","name","children","onChanged","existsByPath","location","hash","switchByPath","addTab","Date","getTime","setRoutes","r","getRoute","href","id","title","rendered","icon","dynamicRender","isJump","onClicked","hasChild","obj","data","layid","remote","method","cached","console","log","exports"],"mappings":"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","file":"admin.js","sourcesContent":["var mods = [\r\n  'element', 'sidebar', 'mockjs', 'select',\r\n  'tabs', 'menu', 'route', 'utils', 'component', 'kit', 'echarts'\r\n];\r\n\r\nlayui.define(mods, function(exports) {\r\n  var element = layui.element,\r\n    utils = layui.utils,\r\n    $ = layui.jquery,\r\n    _ = layui.lodash,\r\n    route = layui.route,\r\n    tabs = layui.tabs,\r\n    layer = layui.layer,\r\n    menu = layui.menu,\r\n    component = layui.component,\r\n    kit = layui.kit;\r\n\r\n\r\n  var Admin = function() {\r\n    this.config = {\r\n      elem: '#app',\r\n      loadType: 'SPA'\r\n    };\r\n    this.version = '1.0.0';\r\n  };\r\n\r\n  Admin.prototype.ready = function(callback) {\r\n    var that = this,\r\n      config = that.config;\r\n\r\n    // 初始化加载方式\r\n    const { getItem } = utils.localStorage;\r\n    const setting = getItem(\"KITADMIN_SETTING_LOADTYPE\");\r\n    if (setting !== null && setting.loadType !== undefined) {\r\n      config.loadType = setting.loadType;\r\n    }\r\n\r\n    kit.set({\r\n      type: config.loadType\r\n    }).init();\r\n\r\n    // 初始化路由\r\n    _private.routeInit(config);\r\n    // 初始化左侧菜单\r\n    _private.menuInit(config);\r\n    // 初始化选项卡\r\n    if (config.loadType === 'TABS') {\r\n      _private.tabsInit();\r\n    }\r\n    // 跳转至首页\r\n    if (location.hash === '') {\r\n      utils.setUrlState('主页', '#/');\r\n    }\r\n\r\n    // // 处理 sidebar\r\n    // layui.sidebar.render({\r\n    //   elem: '#ccleft',\r\n    //   //content:'', \r\n    //   title: '这是左侧打开的栗子',\r\n    //   shade: true,\r\n    //   // shadeClose:false,\r\n    //   direction: 'left',\r\n    //   dynamicRender: true,\r\n    //   url: 'components/table/teble2.html',\r\n    //   width: '50%', //可以设置百分比和px\r\n    // });\r\n\r\n    // $('#cc').on('click', function() {\r\n    //   var that = this;\r\n    //   layui.sidebar.render({\r\n    //     elem: that,\r\n    //     //content:'', \r\n    //     title: '这是表单盒子',\r\n    //     shade: true,\r\n    //     // shadeClose:false,\r\n    //     // direction: 'left'\r\n    //     dynamicRender: true,\r\n    //     url: 'components/form/index.html',\r\n    //     width: '50%', //可以设置百分比和px\r\n    //   });\r\n    // });\r\n    // 监听头部右侧 nav\r\n    component.on('nav(header_right)', function(_that) {\r\n      var target = _that.elem.attr('kit-target');\r\n      if (target === 'setting') {\r\n        // 绑定sidebar\r\n        layui.sidebar.render({\r\n          elem: _that.elem,\r\n          //content:'', \r\n          title: '设置',\r\n          shade: true,\r\n          // shadeClose:false,\r\n          // direction: 'left'\r\n          dynamicRender: true,\r\n          url: 'components/setting.html',\r\n          // width: '50%', //可以设置百分比和px\r\n        });\r\n      }\r\n      if (target === 'help') {\r\n        layer.alert('QQ群：248049395，616153456');\r\n      }\r\n    });\r\n\r\n    // 注入mock\r\n    layui.mockjs.inject(APIs);\r\n\r\n    // 初始化渲染\r\n    if (config.loadType === 'SPA') {\r\n      route.render();\r\n    }\r\n    that.render();\r\n\r\n    // 执行回调函数\r\n    typeof callback === 'function' && callback();\r\n  }\r\n  Admin.prototype.render = function() {\r\n    var that = this;\r\n    return that;\r\n  }\r\n\r\n  var _private = {\r\n    routeInit: function(config) {\r\n      var that = this;\r\n      // route.set({\r\n      //   beforeRender: function (route) {\r\n      //     if (!utils.oneOf(route.path, ['/user/table', '/user/table2', '/'])) {\r\n      //       return {\r\n      //         id: new Date().getTime(),\r\n      //         name: 'Unauthorized',\r\n      //         path: '/exception/403',\r\n      //         component: 'components/exception/403.html'\r\n      //       };\r\n      //     }\r\n      //     return route;\r\n      //   }\r\n      // });\r\n      // 配置路由\r\n      var routeOpts = {\r\n        // name: 'kitadmin',\r\n        r: [{\r\n          path: '/user/index',\r\n          component: '/components/user/index.html',\r\n          name: '用户列表',\r\n          children: [{\r\n            path: '/user/create',\r\n            component: 'components/user/create.html',\r\n            name: '新增用户',\r\n          }, {\r\n            path: '/user/edit',\r\n            component: 'components/user/edit.html',\r\n            name: '编辑用户',\r\n          }]\r\n        }],\r\n        routes: [{\r\n          path: '/user/index',\r\n          component: '/components/user/index.html',\r\n          name: '用户列表'\r\n        }, {\r\n          path: '/user/create',\r\n          component: 'components/user/create.html',\r\n          name: '新增用户',\r\n        }, {\r\n          path: '/user/edit',\r\n          component: 'components/user/edit.html',\r\n          name: '编辑用户',\r\n        }, {\r\n          path: '/cascader',\r\n          component: 'components/cascader/index.html',\r\n          name: 'Cascader'\r\n        }, {\r\n          path: '/',\r\n          component: 'components/app.html',\r\n          name: '主页'\r\n        }, {\r\n          path: '/user/my',\r\n          component: 'components/profile.html',\r\n          name: '用户中心'\r\n        }, {\r\n          path: '/inputnumber',\r\n          component: 'components/inputnumber.html',\r\n          name: 'InputNumber'\r\n        }, {\r\n          path: '/layui/grid',\r\n          component: 'components/layui/grid.html',\r\n          name: 'Grid'\r\n        }, {\r\n          path: '/layui/button',\r\n          component: 'components/layui/button.html',\r\n          name: '按钮'\r\n        }, {\r\n          path: '/layui/form',\r\n          component: 'components/layui/form.html',\r\n          name: '表单'\r\n        }, {\r\n          path: '/layui/nav',\r\n          component: 'components/layui/nav.html',\r\n          name: '导航/面包屑'\r\n        }, {\r\n          path: '/layui/tab',\r\n          component: 'components/layui/tab.html',\r\n          name: '选项卡'\r\n        }, {\r\n          path: '/layui/progress',\r\n          component: 'components/layui/progress.html',\r\n          name: 'progress'\r\n        }, {\r\n          path: '/layui/panel',\r\n          component: 'components/layui/panel.html',\r\n          name: 'panel'\r\n        }, {\r\n          path: '/layui/badge',\r\n          component: 'components/layui/badge.html',\r\n          name: 'badge'\r\n        }, {\r\n          path: '/layui/timeline',\r\n          component: 'components/layui/timeline.html',\r\n          name: 'timeline'\r\n        }, {\r\n          path: '/layui/table-element',\r\n          component: 'components/layui/table-element.html',\r\n          name: 'table-element'\r\n        }, {\r\n          path: '/layui/anim',\r\n          component: 'components/layui/anim.html',\r\n          name: 'anim'\r\n        }, {\r\n          path: '/layui/layer',\r\n          component: 'components/layui/layer.html',\r\n          name: 'layer'\r\n        }, {\r\n          path: '/layui/laydate',\r\n          component: 'components/layui/laydate.html',\r\n          name: 'laydate'\r\n        }, {\r\n          path: '/layui/table',\r\n          component: 'components/layui/table.html',\r\n          name: 'table'\r\n        }, {\r\n          path: '/layui/laypage',\r\n          component: 'components/layui/laypage.html',\r\n          name: 'laypage'\r\n        }, {\r\n          path: '/layui/upload',\r\n          component: 'components/layui/upload.html',\r\n          name: 'upload'\r\n        }, {\r\n          path: '/layui/carousel',\r\n          component: 'components/layui/carousel.html',\r\n          name: 'carousel'\r\n        }, {\r\n          path: '/layui/laytpl',\r\n          component: 'components/layui/laytpl.html',\r\n          name: 'laytpl'\r\n        }, {\r\n          path: '/layui/flow',\r\n          component: 'components/layui/flow.html',\r\n          name: 'flow'\r\n        }, {\r\n          path: '/layui/util',\r\n          component: 'components/layui/util.html',\r\n          name: 'util'\r\n        }, {\r\n          path: '/layui/code',\r\n          component: 'components/layui/code.html',\r\n          name: 'code'\r\n        }, {\r\n          path: '/user/table',\r\n          component: '/components/table/teble.html',\r\n          name: 'Table'\r\n        }, {\r\n          path: '/user/table2',\r\n          component: '/components/table/teble2.html',\r\n          name: '数据表格2'\r\n        }, {\r\n          path: '/user/table3',\r\n          component: '/components/table/teble3.html',\r\n          name: '数据表格3'\r\n        }, {\r\n          path: '/user/form',\r\n          component: '/components/form/index.html',\r\n          name: 'Form'\r\n        }, {\r\n          path: '/docs/mockjs',\r\n          component: '/docs/mockjs.html',\r\n          name: '拦截器(Mockjs)'\r\n        }, {\r\n          path: '/docs/menu',\r\n          component: '/docs/menu.html',\r\n          name: '左侧菜单(Menu)'\r\n        }, {\r\n          path: '/docs/route',\r\n          component: '/docs/route.html',\r\n          name: '路由配置(Route)'\r\n        }, {\r\n          path: '/docs/tabs',\r\n          component: '/docs/tabs.html',\r\n          name: '选项卡(Tabs)'\r\n        }, {\r\n          path: '/docs/utils',\r\n          component: '/docs/utils.html',\r\n          name: '工具包(Utils)'\r\n        }, {\r\n          path: '/components/select',\r\n          component: 'components/select/index.html',\r\n          name: 'Select'\r\n        }, {\r\n          path: '/exception/403',\r\n          component: 'components/exception/403.html',\r\n          name: '403'\r\n        }, {\r\n          path: '/exception/404',\r\n          component: 'components/exception/404.html',\r\n          name: '404'\r\n        }, {\r\n          path: '/exception/500',\r\n          component: 'components/exception/500.html',\r\n          name: '500'\r\n        }]\r\n      };\r\n      if (config.loadType === 'TABS') {\r\n        routeOpts.onChanged = function() {\r\n          // 如果当前hash不存在选项卡列表中\r\n          if (!tabs.existsByPath(location.hash)) {\r\n            // 新增一个选项卡\r\n            that.addTab(location.hash, new Date().getTime());\r\n          } else {\r\n            // 切换到已存在的选项卡\r\n            tabs.switchByPath(location.hash);\r\n          }\r\n        }\r\n      }\r\n      // 设置路由\r\n      route.setRoutes(routeOpts);\r\n      return this;\r\n    },\r\n    addTab: function(href, layid) {\r\n      var r = route.getRoute(href);\r\n      if (r) {\r\n        tabs.add({\r\n          id: layid,\r\n          title: r.name,\r\n          path: href,\r\n          component: r.component,\r\n          rendered: false,\r\n          icon: '&#xe62e;'\r\n        });\r\n      }\r\n    },\r\n    menuInit: function(config) {\r\n      var that = this;\r\n      // 配置menu\r\n      menu.set({\r\n        dynamicRender: false,\r\n        isJump: true, //config.loadType === 'SPA',\r\n        onClicked: function(obj) {\r\n          if (config.loadType === 'TABS') {\r\n            if (!obj.hasChild) {\r\n              var data = obj.data;\r\n              var href = data.href;\r\n              var layid = data.layid;\r\n              that.addTab(href, layid);\r\n            }\r\n          }\r\n        },\r\n        elem: '#menu-box',\r\n        remote: {\r\n          url: '/api/getmenus',\r\n          method: 'post'\r\n        },\r\n        cached: false\r\n      }).render();\r\n      return this;\r\n    },\r\n    tabsInit: function() {\r\n      tabs.set({\r\n        onChanged: function(layid) {\r\n          // var tab = tabs.get(layid);\r\n          // if (tab !== null) {\r\n          //   utils.setUrlState(tab.title, tab.path);\r\n          // }\r\n        }\r\n      }).render(function(obj) {\r\n        // 如果只有首页的选项卡\r\n        if (obj.isIndex) {\r\n          route.render('#/');\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  var admin = new Admin();\r\n  admin.ready(function() {\r\n    console.log('Init successed.');\r\n  });\r\n\r\n  //输出admin接口\r\n  exports('admin', {});\r\n});"]}