{"version":3,"sources":["component.js"],"names":["layui","define","exports","layer","jquery","$","classNames","nav","NAV","ITEM","Component","this","version","render","modName","filterName","prototype","_private","renderNav","init","on","events","callback","onevent","call","MOD_NAME","undefined","find","each","navs","_nav","_that","hasChild","_child","length","addClass","children","off","e","SHOW","document","removeClass","parents","THIS","parent","elem","event","filter","component"],"mappings":";cACAA,MAAMC,QAAQ,SAAU,SAAUC,GADlCF,MAAAG,MAAA,IACAH,EAAMC,MAAQG,OAEVC,EAAUD,YAGRE,GAAAA,IAAAA,WACFC,KAAK,YACHC,KAAK,aACLC,KAAM,cAFHC,EAAA,WADPC,KAAAC,QAAA,SASEF,EAAKE,UAAUC,OAAf,SAAAC,EAAAC,GAEFL,QAAUM,IAAVN,EACEO,EAAWC,UAAXH,QAEEE,OAAAA,GADF,IAEO,MACLA,EAAQH,UAARC,GAAA,OARJJ,MAeCD,EAZDM,UAAAG,KAAA,WAcAT,OACEC,KAAKE,SADPH,MAEEA,EAAOM,UAAPI,GAAA,SAAAC,EAAAC,GAFF,OAAAtB,MAAAuB,QAAAC,KAAAb,KAAAc,EAAAJ,EAAAC,IAMC,IAFDL,GAKEC,UAAW,SAAUH,GAArBG,OADaQ,IAAAX,EACbG,EAAWV,IAAUO,uBAAYA,EAAA,KAIfY,KAAKrB,EAAeG,MAAMmB,KAAK,WAA/C,IAAIC,EAAOC,EAAKH,MACVI,EAAQ1B,EAAZsB,KAAA,oBAEAK,EAAAC,EAAAC,OAAA,EACIF,IACJD,EAAIC,SAAU,KAAAG,SAAA,SACZJ,EAAMK,SAAS,cAAcD,SAA7B,qBAGFJ,EAAAM,IAAA,SAAAjB,GAAA,QAAA,SAAAkB,GAGE,GAFFP,MAAMM,MAAIC,GAERN,EACAD,EAAIC,SAAU1B,EAAAiC,MACZR,EAAAA,UAAMI,GAAS7B,QAAAA,WACbkC,EAAAA,YAAalC,EAASiC,MACtBR,EAAAA,MAAMU,IAAAA,eADR,CAKAV,EAAAW,QAAApC,EAAAE,KACAuB,KAAMW,EAAQpC,MAGdyB,YAAezB,cACfyB,EAAAI,SAAA7B,EAAAqC,MACAZ,EAAMa,OAAO,kBAIbA,OAAA,eACAH,YAAaV,EAAczB,MAGzBuC,IAAAA,EAAMd,EAAAA,QAAAA,EAAAA,KAAAA,KAAAA,cAET/B,MAAA8C,MAAAtB,KAAAb,KAAAc,EAAA,OAAAsB,EAAA,KA1BHF,KAAAd,WAmCNiB,EAAA,IAAAtC,EACAR,EAAQiB,OAARjB,EAAQ,YAAa8C","file":"component.js","sourcesContent":["// 处理组件的渲染和操作\r\nlayui.define(['layer'], function (exports) {\r\n  var layer = layui.layer,\r\n    $ = layui.jquery;\r\n\r\n  var MOD_NAME = 'component';\r\n  var classNames = {\r\n    nav: {\r\n      NAV: '.kit-nav',\r\n      ITEM: '.kit-item',\r\n      SHOW: 'layui-show',\r\n      THIS: 'layui-this'\r\n    }\r\n  };\r\n  var Component = function () {\r\n    this.version = '1.0.0';\r\n  };\r\n  Component.prototype.render = function (modName, filterName) {\r\n    var that = this;\r\n    if (modName === undefined) {\r\n      _private.renderNav(filterName);\r\n    } else {\r\n      switch (modName) {\r\n        case 'nav':\r\n          _private.renderNav(filterName);\r\n          break;\r\n      }\r\n    }\r\n    return that;\r\n  };\r\n\r\n  Component.prototype.init = function () {\r\n    this.render();\r\n    return this;\r\n  };\r\n  Component.prototype.on = function (events, callback) {\r\n    return layui.onevent.call(this, MOD_NAME, events, callback);\r\n  }\r\n\r\n  var _private = {\r\n    renderNav: function (filterName) {\r\n      var _nav = filterName === undefined ?\r\n        $(classNames.nav.NAV) : $('.kit-nav[lay-filter=' + filterName + ']');\r\n\r\n      var navs = _nav.find(classNames.nav.ITEM).each(function () {\r\n        var _that = $(this);\r\n        var _child = _that.find('ul.kit-nav-child');\r\n        // 是否拥有二级\r\n        var hasChild = _child.length > 0;\r\n        if (hasChild) {\r\n          _that.children('a').addClass('child');\r\n          _child.addClass('layui-anim').addClass('layui-anim-upbit');\r\n        }\r\n        // 绑定点击事件\r\n        _that.off('click').on('click', function (e) {\r\n          layui.stope(e);\r\n          // 如果拥有二级则显示二级\r\n          if (hasChild) {\r\n            _that.addClass(classNames.nav.SHOW);\r\n            $(document).on('click', function () {\r\n              _that.removeClass(classNames.nav.SHOW);\r\n              $(this).off('click');\r\n            });\r\n          } else {\r\n            // 切换选中状态\r\n            _that.parents(classNames.nav.NAV)\r\n              .find(classNames.nav.ITEM)\r\n              .removeClass('layui-this');\r\n            _that.addClass(classNames.nav.THIS);\r\n            // 隐藏二级\r\n            _that.parent('.kit-nav-child')\r\n              .parent('.layui-show')\r\n              .removeClass(classNames.nav.SHOW);\r\n\r\n            //获取过滤器名称\r\n            var filter = _that.parents(classNames.nav.NAV).attr('lay-filter');\r\n            //执行事件\r\n            layui.event.call(this, MOD_NAME, 'nav(' + filter + ')', {\r\n              elem: _that\r\n            });\r\n          }\r\n        });\r\n      });\r\n    }\r\n  };\r\n\r\n  var component = new Component();\r\n  component.init();\r\n\r\n  //输出component接口\r\n  exports('component', component);\r\n});"]}